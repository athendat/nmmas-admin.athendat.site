"use strict";(self.webpackChunknmmas_admin_ssr=self.webpackChunknmmas_admin_ssr||[]).push([[71],{5071:(W,A,i)=>{i.r(A),i.d(A,{QuestionsAnswersModule:()=>H});var y=i(177),r=i(6582),h=i(1583),c=i(1635),t=i(3953);let b=(()=>{class o{static#t=this.type="[Question] Get";constructor(e){this.payload=e}}return o})(),v=(()=>{class o{static#t=this.type="[Question] Edit";constructor(e){this.id=e}}return o})(),C=(()=>{class o{static#t=this.type="[Question] put";constructor(e,s){this.payload=e,this.id=s}}return o})(),Q=(()=>{class o{static#t=this.type="[Question] Delete";constructor(e){this.id=e}}return o})(),g=(()=>{class o{static#t=this.type="[Question] Delete All";constructor(e){this.ids=e}}return o})();var M=i(8141),R=i(8701),j=i(1626),F=i(5312);let T=(()=>{class o{constructor(){this.http=(0,t.WQX)(j.Qq)}getQuestionAnswers(e){return this.http.get(`${F.c.URL}/questions.json`,e)}static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),l=class m{constructor(){this.store=(0,t.WQX)(r.il),this.notificationService=(0,t.WQX)(R.J),this.questionsAnswersService=(0,t.WQX)(T)}static questionAnswers(n){return n.question}static selectedQuestionAnswers(n){return n.selectedQuestion}getQuestionAnswers(n,e){return this.questionsAnswersService.getQuestionAnswers(e.payload).pipe((0,M.M)({next:s=>{n.patchState({question:{data:s.data,total:s?.total?s?.total:s.data?.length}})},error:s=>{throw new Error(s?.error?.message)}}))}edit(n,{id:e}){const s=n.getState(),a=s.question.data.find(d=>d.id===e);n.patchState({...s,selectedQuestion:a})}update(n,{}){}delete(n,{}){}deleteAll(n,{}){}static#t=this.\u0275fac=function(e){return new(e||m)};static#e=this.\u0275prov=t.jDH({token:m,factory:m.\u0275fac})};(0,c.Cg)([(0,r.rc)(b)],l.prototype,"getQuestionAnswers",null),(0,c.Cg)([(0,r.rc)(v)],l.prototype,"edit",null),(0,c.Cg)([(0,r.rc)(C)],l.prototype,"update",null),(0,c.Cg)([(0,r.rc)(Q)],l.prototype,"delete",null),(0,c.Cg)([(0,r.rc)(g)],l.prototype,"deleteAll",null),(0,c.Cg)([(0,r.MD)()],l,"questionAnswers",null),(0,c.Cg)([(0,r.MD)()],l,"selectedQuestionAnswers",null),l=(0,c.Cg)([(0,r.Uw)({name:"question",defaults:{question:{data:[],total:0},selectedQuestion:null}})],l);var $=i(844),D=i(7313),G=i(467),u=i(9417),w=i(3391),S=i(7506),I=i(3955);const E=["answersModal"];function x(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",1)(1,"h3",2),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"app-button",3),t.bIt("click",function(){const a=t.eBV(e).$implicit;return t.Njj(a.dismiss("Cross click"))}),t.nrm(5,"i",4),t.k0s()(),t.j41(6,"div",5)(7,"div",6)(8,"table",7)(9,"tbody")(10,"tr")(11,"td",8),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.j41(14,"td",9),t.EFF(15),t.k0s()(),t.j41(16,"tr")(17,"td",8),t.EFF(18),t.nI1(19,"translate"),t.k0s(),t.j41(20,"td",9),t.nrm(21,"textarea",10),t.k0s()()()()(),t.j41(22,"div")(23,"div",11)(24,"app-button",12),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.j41(27,"app-button",13),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.submit())}),t.EFF(28),t.nI1(29,"translate"),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(2),t.JRh(t.bMT(3,17,"Answers")),t.R7$(2),t.HbH("btn btn-close"),t.Y8G("spinner",!1)("id","payout_close_btn"),t.R7$(8),t.JRh(t.bMT(13,19,"Question")),t.R7$(3),t.SpI(" ",null==e.qna?null:e.qna.question," "),t.R7$(3),t.JRh(t.bMT(19,21,"Answers")),t.R7$(3),t.Y8G("formControl",e.answers),t.R7$(3),t.HbH("btn-md fw-bold btn btn-secondary"),t.Y8G("id","close_answers_modal_btn"),t.R7$(),t.SpI(" ",t.bMT(26,23,"Close")," "),t.R7$(2),t.HbH("btn-theme btn-md fw-bold btn"),t.Y8G("id","submit_answers_btn"),t.R7$(),t.SpI(" ",t.bMT(29,25,"submit")," ")}}let k=(()=>{class o{constructor(){this.modalService=(0,t.WQX)(w.Bq),this.store=(0,t.WQX)(r.il),this.modalOpen=!1,this.answers=new u.MJ("",[u.k0.required])}openModal(e){var s=this;return(0,G.A)(function*(){s.modalOpen=!0,s.qna=e,s.answers.patchValue(e.answer?e.answer:""),s.modalService.open(s.AnswersModal,{ariaLabelledBy:"Payout-Modal",centered:!0,windowClass:"theme-modal text-center"}).result.then(a=>{s.closeResult=`Closed with: ${a}`},a=>{s.closeResult=`Dismissed ${s.getDismissReason(a)}`})})()}getDismissReason(e){return e===w.PQ.ESC?"by pressing ESC":e===w.PQ.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}submit(){this.answers.markAllAsTouched(),this.answers.valid&&this.store.dispatch(new C({question:this.qna.question,answer:this.answers.value,product_id:this.qna.product_id},this.qna.id)).subscribe({complete:()=>{this.modalService.dismissAll()}})}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-answers-modal"]],viewQuery:function(s,a){if(1&s&&t.GBs(E,5),2&s){let d;t.mGM(d=t.lsd())&&(a.AnswersModal=d.first)}},decls:2,vars:0,consts:[["answersModal",""],[1,"modal-header"],[1,"mb-1","fw-semibold"],[3,"click","spinner","id"],[1,"ri-close-line"],[1,"modal-body","qa-modal"],[1,"border","rounded-3","mb-4"],[1,"table","all-package","theme-table","no-footer"],[1,"text-start","fw-semibold"],[1,"text-start"],["placeholder","Enter Answers",1,"form-control",3,"formControl"],[1,"button-box"],[3,"id"],[3,"click","id"]],template:function(s,a){1&s&&t.DNE(0,x,30,27,"ng-template",null,0,t.C5r)},dependencies:[u.me,u.BC,u.l_,S.Q,I.D9]})}return o})();const B=["answersModal"];class p{constructor(){this.store=(0,t.WQX)(r.il),this.router=(0,t.WQX)(h.Ix),this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"Question",dataField:"question"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"store.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"store.destroy"}],data:[],total:0}}ngOnInit(){this.questionAnswers$.subscribe(n=>{this.tableConfig.data=n.data?n.data:[],this.tableConfig.total=n?.total?n?.total:0})}onTableChange(n){this.store.dispatch(new b(n))}onActionClicked(n){"edit"===n.actionToPerform?this.AnswersModal.openModal(n.data):"delete"===n.actionToPerform?this.delete(n.data):"deleteAll"===n.actionToPerform&&this.deleteAll(n.data)}delete(n){this.store.dispatch(new Q(n.id))}deleteAll(n){this.store.dispatch(new g(n))}static#t=this.\u0275fac=function(e){return new(e||p)};static#e=this.\u0275cmp=t.VBU({type:p,selectors:[["app-questions-answers"]],viewQuery:function(e,s){if(1&e&&t.GBs(B,5),2&e){let a;t.mGM(a=t.lsd())&&(s.AnswersModal=a.first)}},decls:4,vars:4,consts:[["answersModal",""],[3,"gridClass","title"],[3,"tableChanged","action","tableConfig","hasCheckbox"]],template:function(e,s){if(1&e){const a=t.RV6();t.j41(0,"app-page-wrapper",1)(1,"app-table",2),t.bIt("tableChanged",function(f){return t.eBV(a),t.Njj(s.onTableChange(f))})("action",function(f){return t.eBV(a),t.Njj(s.onActionClicked(f))}),t.k0s()(),t.nrm(2,"app-answers-modal",null,0)}2&e&&(t.Y8G("gridClass","col-sm-12")("title","Q&A"),t.R7$(),t.Y8G("tableConfig",s.tableConfig)("hasCheckbox",!0))},dependencies:[$.O,D.k,k]})}(0,c.Cg)([(0,r.l6)(l.questionAnswers)],p.prototype,"questionAnswers$",void 0);const V=[{path:"",component:p}];let X=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.$C({type:o});static#s=this.\u0275inj=t.G2t({imports:[h.iI.forChild(V),h.iI]})}return o})();var P=i(3887),q=i(1908);let H=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.$C({type:o});static#s=this.\u0275inj=t.G2t({imports:[y.MD,X,P.G,r.rK.forFeature([l,q.Z])]})}return o})()}}]);