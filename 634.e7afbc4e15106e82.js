"use strict";(self.webpackChunknmmas_admin_ssr=self.webpackChunknmmas_admin_ssr||[]).push([[634],{9634:(F,u,o)=>{o.r(u),o.d(u,{CommissionModule:()=>W});var d=o(177),e=o(6582),h=o(1583),m=o(1635),t=o(3953);let y=(()=>{class i{static#t=this.type="[Commission] Get";constructor(a){this.payload=a}}return i})();var C=o(8141),f=o(1626),g=o(5312);let r=(()=>{class i{constructor(){this.http=(0,t.WQX)(f.Qq)}getCommissionHistory(a){return this.http.get(`${g.c.URL}/commission.json`,{params:a})}static#t=this.\u0275fac=function(s){return new(s||i)};static#s=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),l=class v{constructor(){this.commissionService=(0,t.WQX)(r)}static commission(n){return n.commission}getCommission(n,a){return this.commissionService.getCommissionHistory(a.payload).pipe((0,C.M)({next:s=>{n.patchState({commission:{data:s.data,total:s?.total?s?.total:s.data?.length}})},error:s=>{throw new Error(s?.error?.message)}}))}static#t=this.\u0275fac=function(a){return new(a||v)};static#s=this.\u0275prov=t.jDH({token:v,factory:v.\u0275fac})};(0,m.Cg)([(0,e.rc)(y)],l.prototype,"getCommission",null),(0,m.Cg)([(0,e.MD)()],l,"commission",null),l=(0,m.Cg)([(0,e.Uw)({name:"commission",defaults:{commission:{data:[],total:0}}})],l);var M=o(844),D=o(7313);class p{constructor(){this.store=(0,t.WQX)(e.il),this.router=(0,t.WQX)(h.Ix),this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"order_id",dataField:"order_id"},{title:"store_name",dataField:"store_name"},{title:"admin_commission",dataField:"admin_commission",type:"price"},{title:"vendor_commission",dataField:"vendor_commission",type:"price"},{title:"created_at",dataField:"created_at",type:"date"}],data:[],total:0}}ngOnInit(){this.commission$.subscribe(n=>{let a=n?.data?.filter(s=>(s.store_name=`<span class="text-capitalize">${s.store.store_name}</span>`,s.order_id=`<span class="fw-bolder">#${s.order.order_number}</span>`,s));this.tableConfig.data=n?a:[],this.tableConfig.total=n?n?.total:0})}onTableChange(n){this.store.dispatch(new y(n))}static#t=this.\u0275fac=function(a){return new(a||p)};static#s=this.\u0275cmp=t.VBU({type:p,selectors:[["app-commission"]],decls:2,vars:5,consts:[[3,"gridClass","title"],[3,"tableChanged","tableConfig","hasCheckbox","dateRange"]],template:function(a,s){1&a&&(t.j41(0,"app-page-wrapper",0)(1,"app-table",1),t.bIt("tableChanged",function(G){return s.onTableChange(G)}),t.k0s()()),2&a&&(t.Y8G("gridClass","col-sm-12")("title","commission_history"),t.R7$(),t.Y8G("tableConfig",s.tableConfig)("hasCheckbox",!1)("dateRange",!0))},dependencies:[M.O,D.k]})}(0,m.Cg)([(0,e.l6)(l.commission)],p.prototype,"commission$",void 0);var I=o(1608);const E=[{path:"",component:p,canActivate:[I.L],data:{permission:"commission_history.index"}}];let b=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#s=this.\u0275mod=t.$C({type:i});static#o=this.\u0275inj=t.G2t({imports:[h.iI.forChild(E),h.iI]})}return i})();var A=o(3887);let W=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#s=this.\u0275mod=t.$C({type:i});static#o=this.\u0275inj=t.G2t({imports:[d.MD,b,A.G,e.rK.forFeature([l])]})}return i})()},1608:(F,u,o)=>{o.d(u,{L:()=>m});var d=o(3953),e=o(1583),h=o(6582);let m=(()=>{class t{constructor(){this.store=(0,d.WQX)(h.il),this.router=(0,d.WQX)(e.Ix)}canActivate(C,f){const g=this.store.selectSnapshot(c=>c.account).permissions?.map(c=>c?.name),r=C.data?.permission;return!!(!r||!Array.isArray(r)&&g?.includes(r)||Array.isArray(r)&&r?.length&&r.every(c=>g?.includes(c)))||(this.router.navigate(["/error/403"]),!1)}static#t=this.\u0275fac=function(f){return new(f||t)};static#s=this.\u0275prov=d.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);