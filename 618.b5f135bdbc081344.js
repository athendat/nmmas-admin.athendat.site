"use strict";(self.webpackChunknmmas_admin_ssr=self.webpackChunknmmas_admin_ssr||[]).push([[618],{4618:(rt,T,s)=>{s.r(T),s.d(T,{BlogModule:()=>nt});var C=s(177),p=s(6582),h=s(4404),g=s(1583),y=s(1635),t=s(3953),b=s(6261),m=s(5489),I=s(844),v=s(7313),M=s(9949),$=s(3955);const G=()=>["/blog/create"];function F(a,o){1&a&&(t.j41(0,"div",3)(1,"a",4),t.nrm(2,"i",5),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&a&&(t.R7$(),t.Y8G("routerLink",t.lJ4(4,G)),t.R7$(2),t.SpI(" ",t.bMT(4,2,"add_blog")," "))}class f{constructor(){this.store=(0,t.WQX)(p.il),this.router=(0,t.WQX)(g.Ix),this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"blog.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"blog.destroy"}],data:[],total:0}}ngOnInit(){this.blog$.subscribe(o=>{this.tableConfig.data=o?o?.data:[],this.tableConfig.total=o?o?.total:0})}onTableChange(o){this.store.dispatch(new m.GA(o)).subscribe()}onActionClicked(o){"edit"===o.actionToPerform?this.edit(o.data):"status"===o.actionToPerform?this.status(o.data):"delete"===o.actionToPerform?this.delete(o.data):"deleteAll"===o.actionToPerform&&this.deleteAll(o.data)}edit(o){this.router.navigateByUrl(`/blog/edit/${o.id}`)}status(o){this.store.dispatch(new m.YQ(o.id,o.status))}delete(o){this.store.dispatch(new m.yb(o.id))}deleteAll(o){this.store.dispatch(new m.Zs(o))}static#t=this.\u0275fac=function(i){return new(i||f)};static#e=this.\u0275cmp=t.VBU({type:f,selectors:[["app-blog"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(i,e){1&i&&(t.j41(0,"app-page-wrapper",0),t.DNE(1,F,5,5,"div",1),t.j41(2,"app-table",2),t.bIt("tableChanged",function(l){return e.onTableChange(l)})("rowClicked",function(l){return e.edit(l)})("action",function(l){return e.onActionClicked(l)}),t.k0s()()),2&i&&(t.Y8G("gridClass","col-sm-12")("title","blog"),t.R7$(),t.Y8G("hasPermission","blog.create"),t.R7$(),t.Y8G("tableConfig",e.tableConfig)("hasCheckbox",!0))},dependencies:[g.Wk,I.O,v.k,M.p,$.D9],encapsulation:2,changeDetection:0})}(0,y.Cg)([(0,p.l6)(b.g.blog)],f.prototype,"blog$",void 0);var n=s(9417),Y=s(1413),R=s(7673),A=s(5558),j=s(1397),k=s(6977),w=s(7645),E=s(7981),J=s(9281),V=s(9363),D=s(6532),N=s(1469),S=s(7506);const B=()=>[];function U(a,o){1&a&&(t.j41(0,"div",19),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"title_is_required")," "))}function L(a,o){1&a&&(t.j41(0,"div",19),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"thumbnail_is_required")," "))}function Q(a,o){1&a&&(t.j41(0,"div",19),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"select_category_is_required")," "))}class c{constructor(){this.store=(0,t.WQX)(p.il),this.route=(0,t.WQX)(g.nX),this.router=(0,t.WQX)(g.Ix),this.formBuilder=(0,t.WQX)(n.ok),this.selectedCategories=[],this.selectedTags=[],this.html="",this.destroy$=new Y.B,this.store.dispatch(new E.dT({type:"post"})),this.store.dispatch(new w.sQ({type:"post"})),this.form=this.formBuilder.group({title:new n.MJ("",[n.k0.required]),description:new n.MJ,content:new n.MJ,meta_title:new n.MJ,meta_description:new n.MJ,blog_meta_image_id:new n.MJ,blog_thumbnail_id:new n.MJ("",[n.k0.required]),categories:new n.MJ("",[n.k0.required]),tags:new n.MJ,is_featured:new n.MJ(0),is_sticky:new n.MJ(0),status:new n.MJ(1)})}ngOnInit(){this.route.params.pipe((0,A.n)(o=>o.id?this.store.dispatch(new m.xm(o.id)).pipe((0,j.Z)(()=>this.store.select(b.g.selectedBlog))):(0,R.of)()),(0,k.Q)(this.destroy$)).subscribe(o=>{this.id=o?.id,this.selectedCategories=o?.categories.map(i=>i?.id),this.selectedTags=o?.tags.map(i=>i?.id),this.form.patchValue({title:o?.title,description:o?.description,content:o?.content,blog_thumbnail_id:o?.blog_thumbnail_id,categories:this.selectedCategories,tags:this.selectedTags,meta_title:o?.meta_title,meta_description:o?.meta_description,is_featured:o?.is_featured,is_sticky:o?.is_sticky,status:o?.status})}),this.editor=new h.KE}selectThumbnail(o){Array.isArray(o)||this.form.controls.blog_thumbnail_id.setValue(o?o.id:"")}selectMetaImage(o){Array.isArray(o)||this.form.controls.blog_meta_image_id.setValue(o?o.id:null)}selectCategoryItem(o){Array.isArray(o)&&this.form.controls.categories.setValue(o)}selectTagItem(o){Array.isArray(o)&&this.form.controls.tags.setValue(o)}submit(){this.form.markAllAsTouched();let o=new m.ly(this.form.value);"edit"===this.type&&this.id&&(o=new m.Yb(this.form.value,this.id)),this.form.valid&&this.store.dispatch(o).subscribe({complete:()=>{this.router.navigateByUrl("/blog")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(i){return new(i||c)};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["app-form-blog"]],inputs:{type:"type"},decls:47,vars:75,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[1,"custom-editor"],[3,"editor"],["formControlName","content",3,"editor","ngModel","disabled","placeholder"],[3,"selectedItem","position","selectedOption","options","subArrayKey"],[3,"selectedItem","position","selectedOption","options"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","is_featured","formControlName","is_featured"],[1,"switch-state"],["type","checkbox","id","is_sticky","formControlName","is_sticky"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],["type","checkbox","id","status","formControlName","status"],[3,"id"],[1,"invalid-feedback"]],template:function(i,e){if(1&i&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return e.submit()}),t.j41(1,"app-form-fields",1),t.nrm(2,"input",2),t.nI1(3,"translate"),t.DNE(4,U,3,3,"div",3),t.k0s(),t.j41(5,"app-form-fields",1),t.nrm(6,"textarea",4),t.nI1(7,"translate"),t.k0s(),t.j41(8,"app-form-fields",1)(9,"div",5),t.nrm(10,"ngx-editor-menu",6)(11,"ngx-editor",7),t.k0s()(),t.j41(12,"app-form-fields",1),t.DNE(13,L,3,3,"div",3),t.k0s(),t.j41(14,"app-form-fields",1)(15,"app-advanced-dropdown",8),t.nI1(16,"async"),t.nI1(17,"async"),t.bIt("selectedItem",function(l){return e.selectCategoryItem(l)}),t.k0s(),t.DNE(18,Q,3,3,"div",3),t.k0s(),t.j41(19,"app-form-fields",1)(20,"app-advanced-dropdown",9),t.nI1(21,"async"),t.nI1(22,"async"),t.bIt("selectedItem",function(l){return e.selectTagItem(l)}),t.k0s()(),t.j41(23,"app-form-fields",1)(24,"div",10)(25,"label",11),t.nrm(26,"input",12)(27,"span",13),t.k0s()()(),t.j41(28,"app-form-fields",1)(29,"div",10)(30,"label",11),t.nrm(31,"input",14)(32,"span",13),t.k0s()()(),t.j41(33,"app-form-fields",1),t.nrm(34,"input",15),t.nI1(35,"translate"),t.k0s(),t.j41(36,"app-form-fields",1),t.nrm(37,"textarea",16),t.nI1(38,"translate"),t.k0s(),t.j41(39,"app-form-fields",1)(40,"div",10)(41,"label",11),t.nrm(42,"input",17)(43,"span",13),t.k0s()()(),t.j41(44,"app-button",18),t.EFF(45),t.nI1(46,"translate"),t.k0s()()),2&i){let r,l;t.Y8G("formGroup",e.form),t.R7$(),t.Y8G("label","title")("for","title")("required",!0),t.R7$(),t.FS9("placeholder",t.bMT(3,55,"enter_blog_title")),t.R7$(2),t.Y8G("ngIf",e.form.controls.title.touched&&(null==e.form.controls.title.errors?null:e.form.controls.title.errors.required)),t.R7$(),t.Y8G("label","description")("for","desc")("required",!1),t.R7$(),t.FS9("placeholder",t.bMT(7,57,"enter_blog_description")),t.R7$(2),t.Y8G("label","content")("for","content")("required",!1),t.R7$(2),t.Y8G("editor",e.editor),t.R7$(),t.Y8G("editor",e.editor)("ngModel",e.html)("disabled",!1)("placeholder","Type here..."),t.R7$(),t.Y8G("label","thumbnail")("for","image")("required",!0),t.R7$(),t.Y8G("ngIf",e.form.controls.blog_thumbnail_id.touched&&(null==e.form.controls.blog_thumbnail_id.errors?null:e.form.controls.blog_thumbnail_id.errors.required)),t.R7$(),t.Y8G("label","select_categories")("for","category")("required",!0),t.R7$(),t.Y8G("position","top")("selectedOption",e.selectedCategories)("options",null!=(r=t.bMT(16,59,e.category$))&&null!=r.data&&r.data.length?null==(r=t.bMT(17,61,e.category$))?null:r.data:t.lJ4(73,B))("subArrayKey","subcategories"),t.R7$(3),t.Y8G("ngIf",e.form.controls.categories.touched&&(null==e.form.controls.categories.errors?null:e.form.controls.categories.errors.required)),t.R7$(),t.Y8G("label","select_tags")("for","tag")("required",!1),t.R7$(),t.Y8G("position","top")("selectedOption",e.selectedTags)("options",null!=(l=t.bMT(21,63,e.tag$))&&null!=l.data&&l.data.length?null==(l=t.bMT(22,65,e.tag$))?null:l.data:t.lJ4(74,B)),t.R7$(3),t.Y8G("label","featured")("for","is_featured")("required",!1),t.R7$(5),t.Y8G("label","sticky")("for","is_sticky")("required",!1),t.R7$(5),t.Y8G("label","meta_title")("for","meta_title")("required",!1),t.R7$(),t.FS9("placeholder",t.bMT(35,67,"enter_meta_title")),t.R7$(2),t.Y8G("label","meta_description")("for","meta_description")("required",!1),t.R7$(),t.FS9("placeholder",t.bMT(38,69,"enter_meta_description")),t.R7$(2),t.Y8G("label","status")("for","status")("required",!1),t.R7$(5),t.Y8G("id","blog_btn"),t.R7$(),t.SpI(" ",t.bMT(46,71,"create"===e.type?"save_blog":"update_blog")," ")}},dependencies:[C.bT,n.qT,n.me,n.Zm,n.BC,n.cb,n.j4,n.JD,D.z,N.X,S.Q,h.Cl,h.Zu,C.Jj,$.D9]})}(0,y.Cg)([(0,p.l6)(b.g.selectedBlog)],c.prototype,"blog$",void 0),(0,y.Cg)([(0,p.l6)(J.Y.category)],c.prototype,"category$",void 0),(0,y.Cg)([(0,p.l6)(V.U.tag)],c.prototype,"tag$",void 0);let O=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-create-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(e,r){1&e&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-blog",1),t.k0s()),2&e&&(t.Y8G("title","create_blog"),t.R7$(),t.Y8G("type","create"))},dependencies:[v.k,c]})}return a})(),P=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-edit-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(e,r){1&e&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-blog",1),t.k0s()),2&e&&(t.Y8G("title","edit_blog"),t.R7$(),t.Y8G("type","edit"))},dependencies:[v.k,c]})}return a})();var u=s(6383),X=s(8255);let W=(()=>{class a{constructor(){this.CategoryType=u.hM}static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(e,r){1&e&&t.nrm(0,"app-category",0),2&e&&t.Y8G("categoryType",r.CategoryType.post)},dependencies:[X.y],encapsulation:2,changeDetection:0})}return a})();var _=s(1490);let x=(()=>{class a{constructor(){this.CategoryType=u.hM}static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-edit-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(e,r){1&e&&t.nrm(0,"app-edit-category",0),2&e&&t.Y8G("categoryType",r.CategoryType.post)},dependencies:[_.G],encapsulation:2,changeDetection:0})}return a})();var Z=s(9805);let K=(()=>{class a{constructor(){this.CategoryType=u.hM}static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(e,r){1&e&&t.nrm(0,"app-tag",0),2&e&&t.Y8G("tagType",r.CategoryType.post)},dependencies:[Z.e]})}return a})();var z=s(7850);let H=(()=>{class a{constructor(){this.CategoryType=u.hM}static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-create-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(e,r){1&e&&t.nrm(0,"app-create-tag",0),2&e&&t.Y8G("tagType",r.CategoryType.post)},dependencies:[z.o]})}return a})();var q=s(2242);let tt=(()=>{class a{constructor(){this.CategoryType=u.hM}static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-edit-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(e,r){1&e&&t.nrm(0,"app-edit-tag",0),2&e&&t.Y8G("tagType",r.CategoryType.post)},dependencies:[q.a]})}return a})();var d=s(1608);const et=[{path:"",component:f,canActivate:[d.L],data:{permission:"blog.index"}},{path:"create",component:O,canActivate:[d.L],data:{permission:["blog.index","blog.create"]}},{path:"edit/:id",component:P,canActivate:[d.L],data:{permission:["blog.index","blog.edit"]}},{path:"category",component:W,canActivate:[d.L],data:{permission:["category.index"]}},{path:"category/edit/:id",component:x,canActivate:[d.L],data:{permission:["category.index","category.create"]}},{path:"tag",component:K,canActivate:[d.L],data:{permission:["tag.index"]}},{path:"tag/create",component:H,canActivate:[d.L],data:{permission:["tag.create"]}},{path:"tag/edit/:id",component:tt,canActivate:[d.L],data:{permission:["tag.edit"]}}];let ot=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275mod=t.$C({type:a});static#o=this.\u0275inj=t.G2t({imports:[g.iI.forChild(et),g.iI]})}return a})();var at=s(3887),st=s(4190),it=s(5589);let nt=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275mod=t.$C({type:a});static#o=this.\u0275inj=t.G2t({imports:[C.MD,ot,at.G,st.CategoryModule,it.TagModule,p.rK.forFeature([b.g]),h.VZ]})}return a})()}}]);