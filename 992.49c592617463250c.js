"use strict";(self.webpackChunknmmas_admin_ssr=self.webpackChunknmmas_admin_ssr||[]).push([[992,708],{2730:(P,b,a)=>{a.r(b),a.d(b,{MediaModule:()=>x});var t=a(177),n=a(3887),g=a(1583),e=a(3953),v=a(4310),M=a(5194),h=a(9079),c=a(7313),d=a(1228),s=a(9542),i=a(9422),l=a(9949),o=a(3955);const r=["mediaModal"],p=["deleteModal"];function C(m,j){if(1&m){const _=e.RV6();e.j41(0,"ul")(1,"li"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"li")(5,"a",11),e.bIt("click",function(){e.eBV(_);const f=e.XpG(2);return e.Njj(f.DeleteModal.openModal("deleteAll",[]))}),e.nrm(6,"i",12),e.k0s()()()}if(2&m){const _=e.XpG(2);e.R7$(2),e.Lme("",e.bMT(3,2,"selected"),"(",_.images.length?_.images.length:0,")")}}function D(m,j){if(1&m&&(e.j41(0,"div",9),e.DNE(1,C,7,4,"ul",10),e.k0s()),2&m){const _=e.XpG();e.R7$(),e.Y8G("ngIf",null==_.images?null:_.images.length)}}function R(m,j){if(1&m){const _=e.RV6();e.j41(0,"a",13),e.bIt("click",function(){e.eBV(_);const f=e.XpG();return e.Njj(f.MediaModal.openModal())}),e.nrm(1,"i",14),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&m&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"add_media")," "))}let T=(()=>{class m{constructor(){this.images=[],this.#e=(0,e.WQX)(v.VZ),this.#t=(0,e.WQX)(M.uF),this.#n=(0,e.WQX)(e.gRc),this.#a=(0,e.WQX)(e.abz),this.#i=(0,e.WQX)(v.JE)}#e;#t;#n;#a;#i;selectImage(_){this.images=_}onActionClicked(_){if("deleteAll"===_){let u=this.images.map(f=>f?.id);this.#e.removeAttachments(u).pipe((0,h.pQ)(this.#a)).subscribe(f=>{this.images=[],this.#i.showSuccess(f.message),this.#n.markForCheck()})}}deleteImage(_){this.images=this.images.filter(u=>u.id!==_)}static#s=this.\u0275fac=function(u){return new(u||m)};static#l=this.\u0275cmp=e.VBU({type:m,selectors:[["app-media"]],viewQuery:function(u,f){if(1&u&&(e.GBs(r,5),e.GBs(p,5)),2&u){let E;e.mGM(E=e.lsd())&&(f.MediaModal=E.first),e.mGM(E=e.lsd())&&(f.DeleteModal=E.first)}},decls:9,vars:8,consts:[["mediaModal",""],["deleteModal",""],[3,"gridClass","title"],["option","","class","selected-options",4,"hasPermission"],["button",""],["class","align-items-center btn btn-theme d-flex",3,"click",4,"hasPermission"],[3,"setDeleteImage","setImage","loading","selectedImages","multiple"],[3,"selectMedia"],[3,"deleteItem"],["option","",1,"selected-options"],[4,"ngIf"],["href","javascript:void(0)",3,"click"],[1,"ri-delete-bin-line"],[1,"align-items-center","btn","btn-theme","d-flex",3,"click"],[1,"ri-add-line"]],template:function(u,f){if(1&u){const E=e.RV6();e.j41(0,"app-page-wrapper",2),e.DNE(1,D,2,1,"div",3),e.j41(2,"div",4),e.DNE(3,R,4,3,"a",5),e.k0s(),e.j41(4,"app-media-box",6),e.bIt("setDeleteImage",function(I){return e.eBV(E),e.Njj(f.deleteImage(I))})("setImage",function(I){return e.eBV(E),e.Njj(f.selectImage(I))}),e.k0s()(),e.nrm(5,"app-media-modal",7,0),e.j41(7,"app-delete-modal",8,1),e.bIt("deleteItem",function(I){return e.eBV(E),e.Njj(f.onActionClicked(I.actionToPerform))}),e.k0s()}2&u&&(e.Y8G("gridClass","col-12")("title","media_library"),e.R7$(),e.Y8G("hasPermission","attachment.destroy"),e.R7$(2),e.Y8G("hasPermission","attachment.create"),e.R7$(),e.Y8G("loading",!1)("selectedImages",f.images)("multiple",!0),e.R7$(),e.Y8G("selectMedia",!1))},dependencies:[t.bT,c.k,d.b,s.w,i.X,l.p,o.D9],encapsulation:2,changeDetection:0})}return m})();var N=a(1608),B=a(2492);const y=[{path:"",component:T,canActivate:[N.L],data:{permission:"attachment.index"},resolve:{attachments:B.$W}}];let G=(()=>{class m{static#e=this.\u0275fac=function(u){return new(u||m)};static#t=this.\u0275mod=e.$C({type:m});static#n=this.\u0275inj=e.G2t({imports:[g.iI.forChild(y),g.iI]})}return m})(),x=(()=>{class m{static#e=this.\u0275fac=function(u){return new(u||m)};static#t=this.\u0275mod=e.$C({type:m});static#n=this.\u0275inj=e.G2t({imports:[t.MD,G,n.G]})}return m})()},765:(P,b,a)=>{a.d(b,{V:()=>g});var t=a(3953),n=a(3955);let g=(()=>{class e{constructor(){this.loaderClass="loader-wrapper"}static#e=this.\u0275fac=function(h){return new(h||e)};static#t=this.\u0275cmp=t.VBU({type:e,selectors:[["app-loader"]],inputs:{loaderClass:"loaderClass"},decls:6,vars:5,consts:[[1,"loader"]],template:function(h,c){1&h&&(t.j41(0,"div")(1,"div"),t.nrm(2,"div",0),t.j41(3,"h3"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()),2&h&&(t.HbH(c.loaderClass),t.R7$(4),t.JRh(t.bMT(5,3,"loading")))},dependencies:[n.D9]})}return e})()},7313:(P,b,a)=>{a.d(b,{k:()=>l});var t=a(1635),n=a(6582),g=a(8346),e=a(3953),v=a(177),M=a(765),h=a(3955);const c=["*",[["","option",""]],[["","button",""]]],d=["*","[option]","[button]"];function s(o,r){1&o&&e.nrm(0,"app-loader")}function i(o,r){if(1&o&&(e.j41(0,"div",6)(1,"div",7)(2,"h5"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.SdG(5,1),e.k0s(),e.SdG(6,2),e.k0s()),2&o){const p=e.XpG();e.R7$(3),e.JRh(e.bMT(4,1,p.title))}}class l{constructor(){this.grid=!0,this.gridClass="col-xxl-8 col-xl-10 m-auto"}static#e=this.\u0275fac=function(p){return new(p||l)};static#t=this.\u0275cmp=e.VBU({type:l,selectors:[["app-page-wrapper"]],inputs:{title:"title",grid:"grid",gridClass:"gridClass"},ngContentSelectors:d,decls:9,vars:6,consts:[[4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"card"],[1,"card-body"],["class","title-header",4,"ngIf"],[1,"title-header"],[1,"d-flex","align-items-center"]],template:function(p,C){1&p&&(e.NAR(c),e.DNE(0,s,1,0,"app-loader",0),e.nI1(1,"async"),e.j41(2,"div",1)(3,"div",2)(4,"div")(5,"div",3)(6,"div",4),e.DNE(7,i,7,3,"div",5),e.SdG(8),e.k0s()()()()()),2&p&&(e.Y8G("ngIf",e.bMT(1,4,C.loadingStatus$)),e.R7$(4),e.HbH(C.gridClass),e.R7$(3),e.Y8G("ngIf",C.title))},dependencies:[v.bT,M.V,v.Jj,h.D9]})}(0,t.Cg)([(0,n.l6)(g.f.status)],l.prototype,"loadingStatus$",void 0)},9542:(P,b,a)=>{a.d(b,{w:()=>c});var t=a(467),n=a(3953),g=a(3391),e=a(7506),v=a(3955);const M=["deleteModal"];function h(d,s){if(1&d){const i=n.RV6();n.j41(0,"div",1),n.nrm(1,"i",2),n.j41(2,"h5",3),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"p"),n.EFF(6),n.nI1(7,"translate"),n.k0s(),n.j41(8,"div",4)(9,"app-button",5),n.bIt("click",function(){const o=n.eBV(i).$implicit;return n.Njj(o.dismiss("Cancel"))}),n.EFF(10),n.nI1(11,"translate"),n.k0s(),n.j41(12,"app-button",6),n.bIt("click",function(){const o=n.eBV(i).$implicit,r=n.XpG();return n.Njj(r.delete(o))}),n.EFF(13),n.nI1(14,"translate"),n.k0s()()()}2&d&&(n.R7$(3),n.JRh(n.bMT(4,11,"delete_item")),n.R7$(3),n.SpI("",n.bMT(7,13,"deleted_message")," "),n.R7$(3),n.HbH("btn-md fw-bold btn btn-secondary"),n.Y8G("spinner",!1)("id","delete_no_btn"),n.R7$(),n.SpI(" ",n.bMT(11,15,"no")," "),n.R7$(2),n.HbH("btn-theme btn-md fw-bold btn"),n.Y8G("id","delete_yes_btn"),n.R7$(),n.SpI(" ",n.bMT(14,17,"yes")," "))}let c=(()=>{class d{constructor(){this.modalService=(0,n.WQX)(g.Bq),this.modalOpen=!1,this.userAction={},this.deleteItem=new n.bkB}openModal(i,l){var o=this;return(0,t.A)(function*(){o.modalOpen=!0,o.userAction={actionToPerform:i,data:l},o.modalService.open(o.DeleteModal,{ariaLabelledBy:"Delete-Modal",centered:!0,windowClass:"theme-modal text-center"}).result.then(r=>{},r=>{o.closeResult=`Dismissed ${o.getDismissReason(r)}`})})()}getDismissReason(i){return i===g.PQ.ESC?"by pressing ESC":i===g.PQ.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${i}`}delete(i){this.deleteItem.emit(this.userAction)}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}static#e=this.\u0275fac=function(l){return new(l||d)};static#t=this.\u0275cmp=n.VBU({type:d,selectors:[["app-delete-modal"]],viewQuery:function(l,o){if(1&l&&n.GBs(M,5),2&l){let r;n.mGM(r=n.lsd())&&(o.DeleteModal=r.first)}},outputs:{deleteItem:"deleteItem"},decls:2,vars:0,consts:[["deleteModal",""],[1,"modal-body"],[1,"ri-delete-bin-line","icon-box"],[1,"modal-title"],[1,"button-box"],[3,"click","spinner","id"],[3,"click","id"]],template:function(l,o){1&l&&n.DNE(0,h,15,19,"ng-template",null,0,n.C5r)},dependencies:[e.Q,v.D9]})}return d})()},4370:(P,b,a)=>{a.d(b,{e:()=>h});var t=a(3953),n=a(177);const g=c=>({disabled:c}),e=c=>({active:c});function v(c,d){if(1&c){const s=t.RV6();t.j41(0,"li",2)(1,"a",6),t.bIt("click",function(){const l=t.eBV(s).$implicit,o=t.XpG(2);return t.Njj(o.pageSet(l))}),t.EFF(2),t.k0s()()}if(2&c){const s=d.$implicit,i=t.XpG(2);t.Y8G("ngClass",t.eq3(2,e,i.paginate.currentPage===s)),t.R7$(2),t.JRh(s)}}function M(c,d){if(1&c){const s=t.RV6();t.j41(0,"ul",1)(1,"li",2)(2,"a",3),t.bIt("click",function(){t.eBV(s);const l=t.XpG();return t.Njj(l.pageSet(l.paginate.currentPage-1))}),t.nrm(3,"i",4),t.k0s()(),t.DNE(4,v,3,4,"li",5),t.j41(5,"li",2)(6,"a",6),t.bIt("click",function(){t.eBV(s);const l=t.XpG();return t.Njj(l.pageSet(l.paginate.currentPage+1))}),t.nrm(7,"i",7),t.k0s()()()}if(2&c){const s=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(3,g,1===s.paginate.currentPage)),t.R7$(3),t.Y8G("ngForOf",s.paginate.pages),t.R7$(),t.Y8G("ngClass",t.eq3(5,g,s.paginate.currentPage===s.paginate.totalPages))}}let h=(()=>{class c{constructor(){this.setPage=new t.bkB}ngOnChanges(s){this.total=s.total?s.total.currentValue:this.total,this.currentPage=s.currentPage?s.currentPage.currentValue:this.currentPage,this.pageSize=s.pageSize?s.pageSize.currentValue:this.pageSize,this.paginate=this.getPager(this.total,this.currentPage,this.pageSize)}pageSet(s){this.setPage.emit(s)}getPager(s,i,l){let p,C,o=Number(Math.ceil(Number(s)/Number(l)));Number(i)<1?i=1:Number(i)>Number(o)&&(i=Number(o)),Number(o)<=Number(3)?(p=1,C=Number(o)):Number(i)<=Number(Math.floor(Number(3)/2))?(p=1,C=Number(3)):Number(i)>=Number(o)-Number(Math.floor(Number(3)/2))?(p=Number(o)-Number(3)+1,C=Number(o)):(p=Number(i)-Number(Math.floor(Number(3)/2)),C=Number(i)+Number(Math.floor(Number(3)/2)));let D=(Number(i)-1)*Number(l),R=Math.min(Number(D)+Number(l)-1,Number(s)-1),T=Array.from(Array(Number(C)+1-Number(p)).keys()).map(N=>Number(p)+Number(N));return{totalItems:s,currentPage:i,pageSize:l,totalPages:o,startPage:p,endPage:C,startIndex:D,endIndex:R,pages:T}}static#e=this.\u0275fac=function(i){return new(i||c)};static#t=this.\u0275cmp=t.VBU({type:c,selectors:[["app-pagination"]],inputs:{total:"total",currentPage:"currentPage",pageSize:"pageSize"},outputs:{setPage:"setPage"},features:[t.OA$],decls:1,vars:1,consts:[["class","pagination justify-content-center",4,"ngIf"],[1,"pagination","justify-content-center"],[1,"page-item",3,"ngClass"],["href","javascript:void(0)","tabindex","-1","aria-disabled","true",1,"page-link",3,"click"],[1,"ri-arrow-left-s-line"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],["href","javascript:void(0)",1,"page-link",3,"click"],[1,"ri-arrow-right-s-line"]],template:function(i,l){1&i&&t.DNE(0,M,8,7,"ul",0),2&i&&t.Y8G("ngIf",l.paginate.pages&&l.paginate.pages.length)},dependencies:[n.YU,n.Sq,n.bT]})}return c})()},152:(P,b,a)=>{a.d(b,{B:()=>e});var t=a(3236),n=a(9974),g=a(4360);function e(v,M=t.E){return(0,n.N)((h,c)=>{let d=null,s=null,i=null;const l=()=>{if(d){d.unsubscribe(),d=null;const r=s;s=null,c.next(r)}};function o(){const r=i+v,p=M.now();if(p<r)return d=this.schedule(void 0,r-p),void c.add(d);l()}h.subscribe((0,g._)(c,r=>{s=r,i=M.now(),d||(d=M.schedule(o,v),c.add(d))},()=>{l(),c.complete()},void 0,()=>{s=d=null}))})}}}]);