"use strict";(self.webpackChunknmmas_admin_ssr=self.webpackChunknmmas_admin_ssr||[]).push([[64,761],{4064:(b,u,a)=>{a.r(u),a.d(u,{TaxModule:()=>S});var s=a(177),h=a(6582),v=a(3887),d=a(1583),t=a(3953),g=a(9079),m=a(5194),p=a(4310),f=a(844),l=a(7313),c=a(9949),y=a(3955);const I=()=>["/tax/create"];function D(e,E){1&e&&(t.j41(0,"div",3)(1,"a",4),t.nrm(2,"i",5),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&e&&(t.R7$(),t.Y8G("routerLink",t.lJ4(4,I)),t.R7$(2),t.SpI(" ",t.bMT(4,2,"add_tax")," "))}let M=(()=>{class e{constructor(){this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"createdAt",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Editar",actionToPerform:"edit",icon:"ri-pencil-line",permission:"tax.edit"},{label:"Eliminar",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"tax.destroy"}],data:[],total:0},this.#t=(0,t.WQX)(t.gRc),this.#e=(0,t.WQX)(t.abz),this.#s=(0,t.WQX)(p.JE),this.#i=(0,t.WQX)(d.Ix),this.#n=(0,t.WQX)(p.zp),this.#a=(0,t.WQX)(m.R5)}#t;#e;#s;#i;#n;#a;ngOnInit(){this.tableConfig.data=this.#a.taxes(),this.tableConfig.total=this.#a.taxes().length}onTableChange(n){}onActionClicked(n){"edit"===n.actionToPerform?this.edit(n.data):"status"===n.actionToPerform?this.status(n.data):"delete"===n.actionToPerform?this.delete(n.data):"deleteAll"===n.actionToPerform&&this.deleteAll(n.data)}edit(n){this.#i.navigateByUrl(`/tax/edit/${n.id}`)}status(n){}delete(n){this.#n.removeTax(n.id).pipe((0,g.pQ)(this.#e)).subscribe(i=>{this.#s.showSuccess(i.message),this.tableConfig.data=this.#a.taxes(),this.tableConfig.total=this.#a.taxes().length,this.#t.markForCheck()})}deleteAll(n){}static#r=this.\u0275fac=function(i){return new(i||e)};static#o=this.\u0275cmp=t.VBU({type:e,selectors:[["app-tax"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(i,r){1&i&&(t.j41(0,"app-page-wrapper",0),t.DNE(1,D,5,5,"div",1),t.j41(2,"app-table",2),t.bIt("tableChanged",function(x){return r.onTableChange(x)})("rowClicked",function(x){return r.edit(x)})("action",function(x){return r.onActionClicked(x)}),t.k0s()()),2&i&&(t.Y8G("gridClass","col-sm-12")("title","taxes"),t.R7$(),t.Y8G("hasPermission","tax.create"),t.R7$(),t.Y8G("tableConfig",r.tableConfig)("hasCheckbox",!0))},dependencies:[d.Wk,f.O,l.k,c.p,y.D9],encapsulation:2,changeDetection:0})}return e})();var o=a(9417),A=a(8701),$=a(6532),G=a(7506);function Q(e,E){1&e&&(t.j41(0,"div",12),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"name_is_required")," "))}function W(e,E){1&e&&(t.j41(0,"div",12),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"rate_is_required")," "))}let F=(()=>{class e{constructor(){this.id="",this.type=t.hFB.required(),this.#t=(0,t.WQX)(p.zp),this.#e=(0,t.WQX)(t.abz),this.#s=(0,t.WQX)(o.ok),this.#i=(0,t.WQX)(A.J),this.#n=(0,t.WQX)(d.nX),this.#a=(0,t.WQX)(d.Ix),this.#r=(0,t.WQX)(m.R5)}#t;#e;#s;#i;#n;#a;#r;ngOnInit(){this.id=this.#n.snapshot.params.id,this.form=this.#s.group({name:new o.MJ("",[o.k0.required]),rate:new o.MJ("",[o.k0.required]),status:new o.MJ(1)}),"edit"===this.type()&&this.form.patchValue({name:this.#r.tax()?.name,rate:this.#r.tax()?.rate,status:this.#r.tax()?.status})}submit(){if(this.form.markAllAsTouched(),this.form.invalid)return;if("edit"===this.type()&&this.id){let i=this.form.getRawValue();return i.id=this.id,void this.#t.updateTax(this.id,i).pipe((0,g.pQ)(this.#e)).subscribe(r=>{this.#i.showSuccess(r.message),this.#a.navigateByUrl("/tax")})}let n=this.form.getRawValue();this.#t.createTax(n).pipe((0,g.pQ)(this.#e)).subscribe(i=>{this.#i.showSuccess(i.message),this.#a.navigateByUrl("/tax")})}static#o=this.\u0275fac=function(i){return new(i||e)};static#l=this.\u0275cmp=t.VBU({type:e,selectors:[["app-form-tax"]],inputs:{type:[1,"type"]},decls:20,vars:21,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","placeholder","Enter tax name","name","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"input-group"],["type","number","min","0","max","100","oninput","if (value > 100) value = 100; if (value < 0) value = 0;","name","rate","formControlName","rate",1,"form-control",3,"placeholder"],[1,"input-group-text"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"]],template:function(i,r){1&i&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return r.submit()}),t.j41(1,"app-form-fields",1),t.nI1(2,"translate"),t.nrm(3,"input",2),t.DNE(4,Q,3,3,"div",3),t.k0s(),t.j41(5,"app-form-fields",1)(6,"div",4),t.nrm(7,"input",5),t.nI1(8,"translate"),t.j41(9,"span",6),t.EFF(10,"%"),t.k0s()(),t.DNE(11,W,3,3,"div",3),t.k0s(),t.j41(12,"app-form-fields",1)(13,"div",7)(14,"label",8),t.nrm(15,"input",9)(16,"span",10),t.k0s()()(),t.j41(17,"app-button",11),t.EFF(18),t.nI1(19,"translate"),t.k0s()()),2&i&&(t.Y8G("formGroup",r.form),t.R7$(),t.Y8G("label",t.bMT(2,15,"name"))("for","name")("required",!0),t.R7$(3),t.Y8G("ngIf",r.form.controls.name.touched&&(null==r.form.controls.name.errors?null:r.form.controls.name.errors.required)),t.R7$(),t.Y8G("label","rate")("for","rate")("required",!0),t.R7$(2),t.FS9("placeholder",t.bMT(8,17,"enter_rate")),t.R7$(4),t.Y8G("ngIf",r.form.controls.rate.touched&&(null==r.form.controls.rate.errors?null:r.form.controls.rate.errors.required)),t.R7$(),t.Y8G("label","status")("for","status")("required",!1),t.R7$(5),t.Y8G("id","tax_btn"),t.R7$(),t.JRh(t.bMT(19,19,"create"===r.type()?"save_tax":"update_tax")))},dependencies:[s.bT,o.qT,o.me,o.Q0,o.Zm,o.BC,o.cb,o.VZ,o.zX,o.j4,o.JD,$.z,G.Q,y.D9],encapsulation:2,changeDetection:0})}return e})(),j=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-create-tax"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,r){1&i&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-tax",1),t.k0s()),2&i&&(t.Y8G("title","add_tax"),t.R7$(),t.Y8G("type","create"))},dependencies:[l.k,F]})}return e})(),P=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-edit-tax"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,r){1&i&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-tax",1),t.k0s()),2&i&&(t.Y8G("title","edit_tax"),t.R7$(),t.Y8G("type","edit"))},dependencies:[l.k,F]})}return e})();var C=a(1608),R=a(2492);const k=[{path:"",component:M,canActivate:[C.L],data:{permission:"tax.index"},resolve:{taxes:R.Q9}},{path:"create",component:j,canActivate:[C.L],data:{permission:["tax.index","tax.create"]}},{path:"edit/:id",component:P,canActivate:[C.L],data:{permission:["tax.index","tax.edit"]},resolve:{tax:R.ew}}];let B=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.$C({type:e});static#s=this.\u0275inj=t.G2t({imports:[d.iI.forChild(k),d.iI]})}return e})();var _=a(955);let S=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.$C({type:e});static#s=this.\u0275inj=t.G2t({imports:[s.MD,B,v.G,h.rK.forFeature([_.t])]})}return e})()},1608:(b,u,a)=>{a.d(u,{L:()=>d});var s=a(3953),h=a(1583),v=a(6582);let d=(()=>{class t{constructor(){this.store=(0,s.WQX)(v.il),this.router=(0,s.WQX)(h.Ix)}canActivate(m,p){const f=this.store.selectSnapshot(c=>c.account).permissions?.map(c=>c?.name),l=m.data?.permission;return!!(!l||!Array.isArray(l)&&f?.includes(l)||Array.isArray(l)&&l?.length&&l.every(c=>f?.includes(c)))||(this.router.navigate(["/error/403"]),!1)}static#t=this.\u0275fac=function(p){return new(p||t)};static#e=this.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},6532:(b,u,a)=>{a.d(u,{z:()=>g});var s=a(3953),h=a(177),v=a(3955);const d=["*"];function t(m,p){1&m&&(s.j41(0,"span",1),s.EFF(1,"*"),s.k0s())}let g=(()=>{class m{constructor(){this.class="mb-4 row align-items-center g-2",this.labelClass="form-label-title col-sm-2 mb-0",this.gridClass="col-sm-10"}static#t=this.\u0275fac=function(l){return new(l||m)};static#e=this.\u0275cmp=s.VBU({type:m,selectors:[["app-form-fields"]],inputs:{class:"class",label:"label",labelClass:"labelClass",gridClass:"gridClass",for:"for",required:"required"},ngContentSelectors:d,decls:7,vars:11,consts:[["class","theme-color ms-2 required-dot",4,"ngIf"],[1,"theme-color","ms-2","required-dot"]],template:function(l,c){1&l&&(s.NAR(),s.j41(0,"div")(1,"label"),s.EFF(2),s.nI1(3,"translate"),s.DNE(4,t,2,0,"span",0),s.k0s(),s.j41(5,"div"),s.SdG(6),s.k0s()()),2&l&&(s.HbH(c.class),s.R7$(),s.HbH(c.labelClass),s.BMQ("for",c.for),s.R7$(),s.SpI(" ",s.bMT(3,9,c.label),""),s.R7$(2),s.Y8G("ngIf",c.required),s.R7$(),s.HbH(c.gridClass))},dependencies:[h.bT,v.D9]})}return m})()}}]);