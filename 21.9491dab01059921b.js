"use strict";(self.webpackChunknmmas_admin_ssr=self.webpackChunknmmas_admin_ssr||[]).push([[21,761],{3021:(F,g,a)=>{a.r(g),a.d(g,{AttributeModule:()=>L});var o=a(177),m=a(1583),t=a(3953),h=a(9079),p=a(5194),_=a(4310),c=a(8701),C=a(844),f=a(7313),u=a(9949),l=a(3955);const I=()=>["/attribute/create"];function T(e,b){1&e&&(t.j41(0,"div",3)(1,"a",4),t.nrm(2,"i",5),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&e&&(t.R7$(),t.Y8G("routerLink",t.lJ4(4,I)),t.R7$(2),t.SpI(" ",t.bMT(4,2,"add_attribute")," "))}let E=(()=>{class e{constructor(){this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"Creado el",dataField:"createdAt",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Editar",actionToPerform:"edit",icon:"ri-pencil-line",permission:"attribute.edit"},{label:"Eliminar",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"attribute.destroy"}],data:[],total:0},this.#r=(0,t.WQX)(_.x9),this.#t=(0,t.WQX)(p.xu),this.#e=(0,t.WQX)(t.gRc),this.#i=(0,t.WQX)(t.abz),this.#o=(0,t.WQX)(c.J),this.#a=(0,t.WQX)(m.Ix)}#r;#t;#e;#i;#o;#a;ngOnInit(){this.tableConfig.data=this.#t.attributes(),this.tableConfig.total=this.#t.attributes().length}onTableChange(r){}onActionClicked(r){"edit"===r.actionToPerform?this.edit(r.data):"delete"===r.actionToPerform?this.delete(r.data):"deleteAll"===r.actionToPerform&&this.deleteAll(r.data)}edit(r){this.#a.navigateByUrl(`/attribute/edit/${r.id}`)}delete(r){this.#r.removeAttribute(r.id).pipe((0,h.pQ)(this.#i)).subscribe(i=>{this.#o.showSuccess(i.message),this.tableConfig.data=this.#t.attributes(),this.tableConfig.total=this.#t.attributes().length,this.#e.markForCheck()})}deleteAll(r){}static#s=this.\u0275fac=function(i){return new(i||e)};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["app-attribute"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(i,s){1&i&&(t.j41(0,"app-page-wrapper",0),t.DNE(1,T,5,5,"div",1),t.j41(2,"app-table",2),t.bIt("tableChanged",function(v){return s.onTableChange(v)})("rowClicked",function(v){return s.edit(v)})("action",function(v){return s.onActionClicked(v)}),t.k0s()()),2&i&&(t.Y8G("gridClass","col-sm-12")("title","attribute"),t.R7$(),t.Y8G("hasPermission","attribute.create"),t.R7$(),t.Y8G("tableConfig",s.tableConfig)("hasCheckbox",!0))},dependencies:[m.Wk,C.O,f.k,u.p,l.D9],encapsulation:2,changeDetection:0})}return e})();var n=a(9417),G=a(6314),$=a(913),M=a(6532),k=a(7506);const D=()=>[];function S(e,b){1&e&&(t.j41(0,"div",13),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"attribute_name_is_required")," "))}function j(e,b){1&e&&(t.j41(0,"div",13),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"value_is_required")," "))}function x(e,b){if(1&e&&(t.j41(0,"div",19)(1,"div",20),t.nrm(2,"input",21),t.j41(3,"h6"),t.EFF(4),t.k0s()()()),2&e){let r;const i=t.XpG().$implicit;t.R7$(4),t.JRh(null==(r=i.get("hex_color"))?null:r.value)}}function W(e,b){if(1&e){const r=t.RV6();t.j41(0,"div",22)(1,"a",23),t.bIt("click",function(){t.eBV(r);const s=t.XpG().index,d=t.XpG();return t.Njj(d.remove(s))}),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"remove")))}function Y(e,b){if(1&e&&(t.j41(0,"app-form-fields",14),t.nI1(1,"translate"),t.j41(2,"div",15)(3,"div"),t.nrm(4,"input",16),t.nI1(5,"translate"),t.DNE(6,j,3,3,"div",3),t.k0s(),t.DNE(7,x,5,1,"div",17)(8,W,4,3,"div",18),t.k0s()()),2&e){let r;const i=b.$implicit,s=b.index,d=t.XpG();t.FS9("formGroupName",s),t.Y8G("label",t.bMT(1,10,"value"))("for","value")("required",!0),t.R7$(3),t.HbH("color"===d.form.get("style").value?"col-sm-7 col-9":"col-sm-10 col-9"),t.R7$(),t.FS9("placeholder",t.bMT(5,12,"attribute_value")),t.R7$(2),t.Y8G("ngIf",i.get("value").touched&&(null==(r=i.get("value").errors)?null:r.required)),t.R7$(),t.Y8G("ngIf","color"===d.form.get("style").value),t.R7$(),t.Y8G("ngIf",(null==d.valueControl||null==d.valueControl.controls?null:d.valueControl.controls.length)>1)}}let A=(()=>{class e{constructor(){this.documents=[{value:"",hex_color:"",id:""}],this.id="",this.type=t.hFB.required(),this.variantStyle=[{value:"rectangle",label:"Rectangle"},{value:"circle",label:"Circle"},{value:"radio",label:"Radio"},{value:"dropdown",label:"Dropdown"},{value:"image",label:"Image"},{value:"color",label:"Color"}],this.#r=(0,t.WQX)(G.x),this.#t=(0,t.WQX)(t.abz),this.#e=(0,t.WQX)(n.ok),this.#i=(0,t.WQX)(c.J),this.#o=(0,t.WQX)(m.nX),this.#a=(0,t.WQX)(m.Ix),this.#s=(0,t.WQX)(p.xu)}#r;#t;#e;#i;#o;#a;#s;get valueControl(){return this.form.get("value")}ngOnInit(){this.id=this.#o.snapshot.params.id,this.form=this.#e.group({name:new n.MJ("",[n.k0.required]),style:new n.MJ("rectangle",[n.k0.required]),status:new n.MJ(!0),value:this.#e.array([],[n.k0.required])}),"create"===this.type()?this.documents.forEach(r=>this.valueControl.push(this.#e.group({value:[r.value,[n.k0.required]],hex_color:[r.hex_color],id:[r.id]}))):(this.form.patchValue(this.#s.attribute()),this.#s.attribute().attribute_values.forEach(r=>{const i="color"===this.form.get("style").value?this.#e.group({value:[r.value,[n.k0.required]],hex_color:[r.hex_color]}):this.#e.group({value:[r.value,[n.k0.required]]});this.valueControl.push(i)}))}add(r){r.preventDefault();const i="color"===this.form.get("style").value?this.#e.group({value:["",[n.k0.required]],hex_color:["#000000"]}):this.#e.group({value:["",[n.k0.required]]});this.valueControl.push(i)}remove(r){this.valueControl.length<=1||this.valueControl.removeAt(+r)}submit(){if(this.form.markAllAsTouched(),this.form.invalid)return;if("edit"===this.type()&&this.id){let i=this.form.getRawValue();return i.id=this.id,i.attribute_values=i.value,delete i.value,void this.#r.updateAttribute(this.id,i).pipe((0,h.pQ)(this.#t)).subscribe(s=>{this.#i.showSuccess(s.message),this.#a.navigateByUrl("/attribute")})}let r=this.form.getRawValue();r.attribute_values=r.value,delete r.value,this.#r.createAttribute(r).pipe((0,h.pQ)(this.#t)).subscribe(i=>{this.#i.showSuccess(i.message),this.#a.navigateByUrl("/attribute")})}static#n=this.\u0275fac=function(i){return new(i||e)};static#l=this.\u0275cmp=t.VBU({type:e,selectors:[["app-form-attribute"]],inputs:{type:[1,"type"]},decls:22,vars:32,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","style",1,"custom-select","d-block",3,"data","placeholder","noResultMessage"],[1,"help-text"],["formArrayName","value"],[3,"label","for","required","formGroupName",4,"ngFor","ngForOf"],[1,"row"],[1,"col-2","offset-sm-2"],[3,"click","id","spinner"],[1,"border-up-class","mt-4"],[3,"id"],[1,"invalid-feedback"],[3,"label","for","required","formGroupName"],[1,"row","g-sm-4","g-3","align-items-center"],["type","text","formControlName","value",1,"form-control",3,"placeholder"],["class","col-sm-3 col-9",4,"ngIf"],["class","col-sm-2 col-3",4,"ngIf"],[1,"col-sm-3","col-9"],[1,"color-box"],["type","color","formControlName","hex_color",1,"form-control"],[1,"col-sm-2","col-3"],[1,"invalid-feedback","h-100","w-100","cursor-pointer",3,"click"]],template:function(i,s){1&i&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return s.submit()}),t.j41(1,"app-form-fields",1),t.nI1(2,"translate"),t.nrm(3,"input",2),t.nI1(4,"translate"),t.DNE(5,S,3,3,"div",3),t.k0s(),t.j41(6,"app-form-fields",1),t.nrm(7,"select2",4),t.nI1(8,"translate"),t.nI1(9,"translate"),t.j41(10,"p",5),t.EFF(11),t.k0s()(),t.qex(12,6),t.DNE(13,Y,9,14,"app-form-fields",7),t.bVm(),t.j41(14,"div",8)(15,"div",9)(16,"app-button",10),t.bIt("click",function(v){return s.add(v)}),t.EFF(17),t.nI1(18,"translate"),t.k0s()()(),t.j41(19,"div",11)(20,"app-button",12),t.EFF(21),t.k0s()()()),2&i&&(t.Y8G("formGroup",s.form),t.R7$(),t.Y8G("label",t.bMT(2,21,"attribute_name"))("for","name")("required",!0),t.R7$(2),t.FS9("placeholder",t.bMT(4,23,"attribute_name")),t.R7$(2),t.Y8G("ngIf",s.form.controls.name.touched&&(null==s.form.controls.name.errors?null:s.form.controls.name.errors.required)),t.R7$(),t.Y8G("label","style")("for","style")("required",!0),t.R7$(),t.FS9("noResultMessage",t.bMT(8,25,"no_data_found")),t.Y8G("data",null!=s.variantStyle&&s.variantStyle.length?s.variantStyle:t.lJ4(31,D))("placeholder",t.bMT(9,27,"select_style")),t.R7$(4),t.SpI(" ","*Choose the desired shape style, such as rectangle or circle. Based on your selection, variant options will be displayed on product page."," "),t.R7$(2),t.Y8G("ngForOf",s.valueControl.controls),t.R7$(3),t.HbH("btn btn-theme"),t.Y8G("id","add_value_btn")("spinner",!1),t.R7$(),t.SpI(" ",t.bMT(18,29,"add_value")," "),t.R7$(3),t.Y8G("id","attribute_btn"),t.R7$(),t.SpI(" ","create"===s.type()?"Save Attribute":"Update Attribute"," "))},dependencies:[o.Sq,o.bT,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,n.$R,n.v8,$.R6,M.z,k.Q,l.D9],encapsulation:2,changeDetection:0})}return e})(),B=(()=>{class e{static#r=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=t.VBU({type:e,selectors:[["app-create-attribute"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,s){1&i&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-attribute",1),t.k0s()),2&i&&(t.Y8G("title","add_attribute"),t.R7$(),t.Y8G("type","create"))},dependencies:[f.k,A]})}return e})(),P=(()=>{class e{static#r=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=t.VBU({type:e,selectors:[["app-edit-attribute"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,s){1&i&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-attribute",1),t.k0s()),2&i&&(t.Y8G("title","edit_attribute"),t.R7$(),t.Y8G("type","edit"))},dependencies:[f.k,A]})}return e})();var y=a(1608),R=a(2492);const Q=[{path:"",component:E,canActivate:[y.L],data:{permission:"attribute.index"},resolve:{attributes:R.sq}},{path:"create",component:B,canActivate:[y.L],data:{permission:["attribute.index","attribute.create"]}},{path:"edit/:id",component:P,canActivate:[y.L],data:{permission:["attribute.index","attribute.edit"]},resolve:{attribute:R.xY}}];let X=(()=>{class e{static#r=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[m.iI.forChild(Q),m.iI]})}return e})();var N=a(3887),O=a(6582),U=a(3624);let L=(()=>{class e{static#r=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[o.MD,X,N.G,O.rK.forFeature([U.U])]})}return e})()},1608:(F,g,a)=>{a.d(g,{L:()=>h});var o=a(3953),m=a(1583),t=a(6582);let h=(()=>{class p{constructor(){this.store=(0,o.WQX)(t.il),this.router=(0,o.WQX)(m.Ix)}canActivate(c,C){const f=this.store.selectSnapshot(l=>l.account).permissions?.map(l=>l?.name),u=c.data?.permission;return!!(!u||!Array.isArray(u)&&f?.includes(u)||Array.isArray(u)&&u?.length&&u.every(l=>f?.includes(l)))||(this.router.navigate(["/error/403"]),!1)}static#r=this.\u0275fac=function(C){return new(C||p)};static#t=this.\u0275prov=o.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},6532:(F,g,a)=>{a.d(g,{z:()=>_});var o=a(3953),m=a(177),t=a(3955);const h=["*"];function p(c,C){1&c&&(o.j41(0,"span",1),o.EFF(1,"*"),o.k0s())}let _=(()=>{class c{constructor(){this.class="mb-4 row align-items-center g-2",this.labelClass="form-label-title col-sm-2 mb-0",this.gridClass="col-sm-10"}static#r=this.\u0275fac=function(u){return new(u||c)};static#t=this.\u0275cmp=o.VBU({type:c,selectors:[["app-form-fields"]],inputs:{class:"class",label:"label",labelClass:"labelClass",gridClass:"gridClass",for:"for",required:"required"},ngContentSelectors:h,decls:7,vars:11,consts:[["class","theme-color ms-2 required-dot",4,"ngIf"],[1,"theme-color","ms-2","required-dot"]],template:function(u,l){1&u&&(o.NAR(),o.j41(0,"div")(1,"label"),o.EFF(2),o.nI1(3,"translate"),o.DNE(4,p,2,0,"span",0),o.k0s(),o.j41(5,"div"),o.SdG(6),o.k0s()()),2&u&&(o.HbH(l.class),o.R7$(),o.HbH(l.labelClass),o.BMQ("for",l.for),o.R7$(),o.SpI(" ",o.bMT(3,9,l.label),""),o.R7$(2),o.Y8G("ngIf",l.required),o.R7$(),o.HbH(l.gridClass))},dependencies:[m.bT,t.D9]})}return c})()}}]);